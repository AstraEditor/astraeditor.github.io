{"version":3,"file":"js/addon-entry-clones.js","sources":["webpack://GUI/./src/addons/addons/clones/style.css","webpack://GUI/./src/addons/addons/clones/300cats.svg","webpack://GUI/./src/addons/addons/clones/cat.svg","webpack://GUI/./src/addons/addons/clones/300cats.svg?c32e","webpack://GUI/./src/addons/addons/clones/_runtime_entry.js","webpack://GUI/./src/addons/addons/clones/cat.svg?aee7","webpack://GUI/./src/addons/addons/clones/userscript.js","webpack://GUI/./src/addons/libraries/common/cs/small-stage.js"],"sourcesContent":["var escape = require(\"../../../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".clone-container-container {\\n  display: none;\\n  align-items: center;\\n  padding: 0.25rem;\\n  user-select: none;\\n  color: #a065ff;\\n}\\n\\n.clone-container {\\n  font-size: 0.625rem;\\n  font-weight: bold;\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n  white-space: nowrap;\\n}\\n\\n.clone-icon {\\n  margin: 0.25rem;\\n  display: inline-block;\\n  background-image: url(\" + escape(require(\"./cat.svg\")) + \");\\n  height: 16px;\\n  width: 16px;\\n}\\n\\n.clone-container-container[data-count=\\\"none\\\"] {\\n  display: none;\\n}\\n\\n.clone-container-container[data-count=\\\"full\\\"] {\\n  color: #ff6680;\\n}\\n\\n.clone-container-container[data-count=\\\"full\\\"] .clone-icon {\\n  background-image: url(\" + escape(require(\"./300cats.svg\")) + \");\\n}\\n\\n.clone-count::after {\\n  content: attr(data-str);\\n}\\n\\n.sa-small-stage .clone-container-container {\\n  display: none !important;\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTYgMTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE2IDE2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO30NCgkuc3Qxe29wYWNpdHk6MC41O2ZpbGw6IzAwOTlGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30NCgkuc3Qye2ZpbGw6IzAwQUJGRjt9DQoJLnN0M3tmaWxsOiMwMDk5RkY7fQ0KCS5zdDR7b3BhY2l0eTowLjU7ZmlsbDojRkZCRkQxO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQ0KCS5zdDV7ZmlsbDojRkY4QUE3O30NCgkuc3Q2e2ZpbGw6I0ZGMDAwNzt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTS0zOTgtMjkyLjVoODAydjYwMmgtODAyVi0yOTIuNXoiLz4NCjxjaXJjbGUgY2xhc3M9InN0MSIgY3g9Ii0zOTEuNSIgY3k9Ii0yODUuNSIgcj0iNC4yIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSItMzg5LjciIGN5PSItMjg0LjIiIHI9IjQuNCIvPg0KPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iLTM4Ny4xIiBjeT0iLTI4MiIgcj0iNS4zIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDQiIGN4PSI1LjIiIGN5PSI1LjciIHI9IjQuMiIvPg0KPGNpcmNsZSBjbGFzcz0ic3Q1IiBjeD0iNy4xIiBjeT0iNyIgcj0iNC40Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDYiIGN4PSI5LjYiIGN5PSI5LjIiIHI9IjUuMyIvPg0KPC9zdmc+DQo=\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTYgMTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE2IDE2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO30NCgkuc3Qxe29wYWNpdHk6MC41O2ZpbGw6IzAwOTlGRjt9DQoJLnN0MntmaWxsOiMwMEFCRkY7fQ0KCS5zdDN7ZmlsbDojMDA5OUZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNLTEtMWg4MDJ2NjAySC0xVi0xeiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iNS41IiBjeT0iNiIgcj0iNC4yIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSI3LjMiIGN5PSI3LjMiIHI9IjQuNCIvPg0KPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iOS45IiBjeT0iOS41IiByPSI1LjMiLz4NCjwvc3ZnPg0K\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTYgMTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE2IDE2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO30NCgkuc3Qxe29wYWNpdHk6MC41O2ZpbGw6IzAwOTlGRjtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgO30NCgkuc3Qye2ZpbGw6IzAwQUJGRjt9DQoJLnN0M3tmaWxsOiMwMDk5RkY7fQ0KCS5zdDR7b3BhY2l0eTowLjU7ZmlsbDojRkZCRkQxO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQ0KCS5zdDV7ZmlsbDojRkY4QUE3O30NCgkuc3Q2e2ZpbGw6I0ZGMDAwNzt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTS0zOTgtMjkyLjVoODAydjYwMmgtODAyVi0yOTIuNXoiLz4NCjxjaXJjbGUgY2xhc3M9InN0MSIgY3g9Ii0zOTEuNSIgY3k9Ii0yODUuNSIgcj0iNC4yIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSItMzg5LjciIGN5PSItMjg0LjIiIHI9IjQuNCIvPg0KPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iLTM4Ny4xIiBjeT0iLTI4MiIgcj0iNS4zIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDQiIGN4PSI1LjIiIGN5PSI1LjciIHI9IjQuMiIvPg0KPGNpcmNsZSBjbGFzcz0ic3Q1IiBjeD0iNy4xIiBjeT0iNyIgcj0iNC40Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDYiIGN4PSI5LjYiIGN5PSI5LjIiIHI9IjUuMyIvPg0KPC9zdmc+DQo=\"","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./style.css\";\nimport _asset from \"!url-loader!./300cats.svg\";\nimport _asset2 from \"!url-loader!./cat.svg\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"style.css\": _css,\n  \"300cats.svg\": _asset,\n  \"cat.svg\": _asset2,\n};\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTYgMTYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDE2IDE2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO30NCgkuc3Qxe29wYWNpdHk6MC41O2ZpbGw6IzAwOTlGRjt9DQoJLnN0MntmaWxsOiMwMEFCRkY7fQ0KCS5zdDN7ZmlsbDojMDA5OUZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNLTEtMWg4MDJ2NjAySC0xVi0xeiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iNS41IiBjeT0iNiIgcj0iNC4yIi8+DQo8Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSI3LjMiIGN5PSI3LjMiIHI9IjQuNCIvPg0KPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iOS45IiBjeT0iOS41IiByPSI1LjMiLz4NCjwvc3ZnPg0K\"","import addSmallStageClass from \"../../libraries/common/cs/small-stage.js\";\n\nexport default async function ({ addon, console, msg }) {\n  const vm = addon.tab.traps.vm;\n\n  let showOnProjectPage = addon.settings.get(\"projectpage\");\n  let showIconOnly = addon.settings.get(\"showicononly\");\n\n  addSmallStageClass();\n\n  let countContainerContainer = document.createElement(\"div\");\n  addon.tab.displayNoneWhileDisabled(countContainerContainer);\n\n  let countContainer = document.createElement(\"div\");\n  let count = document.createElement(\"span\");\n  let icon = document.createElement(\"span\");\n\n  countContainerContainer.className = \"clone-container-container\";\n  countContainer.className = \"clone-container\";\n  count.className = \"clone-count\";\n  icon.className = \"clone-icon\";\n\n  countContainerContainer.appendChild(icon);\n  countContainerContainer.appendChild(countContainer);\n  countContainer.appendChild(count);\n\n  let lastChecked = 0;\n\n  const cache = Array(301)\n    .fill()\n    .map((_, i) => msg(\"clones\", { cloneCount: i }));\n\n  function doCloneChecks(force) {\n    const v = vm.runtime._cloneCounter;\n    // performance\n    if (v === lastChecked && !force) return;\n    lastChecked = v;\n    if (v === 0) {\n      countContainerContainer.dataset.count = \"none\";\n    } else if (v >= vm.runtime.runtimeOptions.maxClones) {\n      countContainerContainer.dataset.count = \"full\";\n    } else {\n      countContainerContainer.dataset.count = \"\";\n    }\n    if (showIconOnly) {\n      count.dataset.str = v;\n    } else {\n      count.dataset.str = cache[v] || msg(\"clones\", { cloneCount: v });\n    }\n\n    if (v === 0 || (addon.tab.editorMode !== \"editor\" && !showOnProjectPage)) countContainerContainer.style.display = \"none\";\n    else countContainerContainer.style.display = \"flex\";\n  }\n\n  addon.settings.addEventListener(\"change\", () => {\n    showIconOnly = addon.settings.get(\"showicononly\");\n    showOnProjectPage = addon.settings.get(\"projectpage\");\n    doCloneChecks(true);\n  });\n\n  const oldStep = vm.runtime._step;\n  vm.runtime._step = function (...args) {\n    const ret = oldStep.call(this, ...args);\n    doCloneChecks();\n    return ret;\n  };\n\n  /*\n  if (addon.self.enabledLate) {\n    // Clone count might be inaccurate if the user deleted sprites\n    // before enabling the addon\n    let count = 0;\n    for (let target of vm.runtime.targets) {\n      if (!target.isOriginal) ++count;\n    }\n    vm.runtime._cloneCounter = count;\n  }\n  */\n\n  while (true) {\n    await addon.tab.waitForElement('[class*=\"controls_controls-container\"]', {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n    });\n\n    if (showOnProjectPage || addon.tab.editorMode === \"editor\" || addon.tab.redux.state.scratchGui.mode.isEmbedded) {\n      addon.tab.appendToSharedSpace({ space: \"afterStopButton\", element: countContainerContainer, order: 2 });\n      doCloneChecks(true);\n    }\n  }\n}","export default function addSmallStageClass() {\n  // TW: no-op; sa-small-stage class is handled by scratch-gui\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRA;AAAA;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACVA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1FA;AAAA;AAAA;AACA;AAAA;;;;A","sourceRoot":""}